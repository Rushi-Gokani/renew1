{% comment %}
Renew — Full-Bleed Hero Product Section (Shopify)
File: sections/renew-hero-product.liquid

Features
- Full-bleed hero with left-aligned sticky video (use Video URL setting)
- Right product panel with title, price, CTA and badges
- Repeat CTAs: hero CTA + pinned buy button
- Story blocks (Ingredients, Craft, Sustainability)
- Recipe cards (editable) and trust microcopy
- Image/video poster fallbacks and IntersectionObserver play/pause
- Schema-driven so everything editable in the theme customizer

Drop into your theme's sections folder and add via customizer.
{% endcomment %}

<section class="renew-hero-product" aria-label="Renew Moringa — Hero">
  <div class="renew-hero-inner">
    <!-- HERO MEDIA (full-bleed left) -->
    <div class="hero-media">
      {% if section.settings.video_url != blank %}
        <div class="hero-video-sticky" style="--top-offset:{{ section.settings.sticky_top | default: 80 }}px">
          <video class="hero-video" src="{{ section.settings.video_url }}" poster="{{ section.settings.poster | img_url: '2048x' }}" {% if section.settings.autoplay %}autoplay{% endif %} {% if section.settings.muted %}muted{% endif %} {% if section.settings.loop %}loop{% endif %} playsinline preload="metadata" aria-hidden="false"></video>
          {% if section.settings.logo != blank and section.settings.show_logo %}
            <img class="hero-logo" src="{{ section.settings.logo | img_url: '400x' }}" alt="{{ section.settings.company | default: 'Renew' }} logo"/>
          {% endif %}
        </div>
      {% else %}
        <div class="hero-poster" style="background-image:url({{ section.settings.poster | img_url: '2048x' }});"></div>
      {% endif %}
    </div>

    <!-- PRODUCT PANEL -->
    <aside class="hero-panel">
      <div class="panel-inner">
        <span class="eyebrow">{{ section.settings.eyebrow | default: 'New' }}</span>
        <h1 class="hero-title">{{ section.settings.title | default: 'Renew Moringa Powder' }}</h1>
        <p class="hero-sub">{{ section.settings.subtitle | default: 'Stone-ground • Farm-fresh • Daily nutrition' }}</p>

        <div class="price-row">
          <div class="price">{{ section.settings.price_text | default: '$12.99' }}</div>
          {% if section.settings.compare_text != blank %}<div class="compare">{{ section.settings.compare_text }}</div>{% endif %}
        </div>

        <p class="micro">{{ section.settings.microcopy | default: '100% natural • No additives • Vegan' }}</p>

        <div class="panel-ctas">
          <a class="btn-primary" href="{{ section.settings.cta_url | default: '/collections/all' }}">{{ section.settings.cta_text | default: 'Buy now' }}</a>
          <a class="btn-secondary" href="#recipes">See recipes</a>
        </div>

        <div class="trust">
          <span class="badge">Small-batch</span>
          <span class="badge">Sustainably sourced</span>
          <span class="badge">Lab-tested</span>
        </div>

        <div class="story-cards">
          <article class="card">
            <h4>Ingredients</h4>
            <p>{{ section.settings.story_1 | default: 'Pure moringa leaves, sun-dried and stone-ground.' }}</p>
          </article>
          <article class="card">
            <h4>Craft</h4>
            <p>{{ section.settings.story_2 | default: 'Hand-picked, small-batch processing to retain nutrients.' }}</p>
          </article>
          <article class="card">
            <h4>Sustainability</h4>
            <p>{{ section.settings.story_3 | default: 'Supporting local farms and responsible harvests.' }}</p>
          </article>
        </div>

      </div>
    </aside>
  </div>

  <!-- RECIPES / USE-CASES -->
  <div id="recipes" class="recipes-row">
    <h3 class="recipes-title">How to use Renew</h3>
    <div class="recipes-grid">
      {% for i in (1..3) %}
        {% assign img_key = 'recipe_image_' | append: i %}
        {% assign title_key = 'recipe_title_' | append: i %}
        {% assign desc_key = 'recipe_desc_' | append: i %}
        {% assign cta_key = 'recipe_cta_' | append: i %}
        {% assign url_key = 'recipe_url_' | append: i %}
        <article class="recipe-card">
          {% if section.settings[img_key] != blank %}
            <img src="{{ section.settings[img_key] | img_url: '800x' }}" alt="Recipe {{ i }}"/>
          {% endif %}
          <div class="rc-body">
            <h4>{{ section.settings[title_key] | default: 'Smoothie boost' }}</h4>
            <p class="rc-desc">{{ section.settings[desc_key] | default: 'Add 1 tsp to your morning smoothie for an easy nutrient boost.' }}</p>
            {% if section.settings[cta_key] != blank %}
              <a class="rc-cta" href="{{ section.settings[url_key] }}">{{ section.settings[cta_key] }}</a>
            {% endif %}
          </div>
        </article>
      {% endfor %}
    </div>
  </div>

  <style>
    :root{--accent:#8be26b;--bg:#fff;--dark:#07101a}
    .renew-hero-product{display:block;background:var(--bg);color:var(--dark);padding:0;margin:0}
    .renew-hero-inner{display:grid;grid-template-columns: 1fr 420px;gap:32px;align-items:stretch}

    /* MEDIA column */
    .hero-media{position:relative}
    .hero-video-sticky{position:sticky;top:var(--top-offset);height:calc(100vh - var(--top-offset));overflow:hidden;border-radius:10px}
    .hero-video{width:100%;height:100%;object-fit:cover;display:block}
    .hero-poster{height:640px;background-size:cover;background-position:center;border-radius:10px}
    .hero-logo{position:absolute;left:18px;top:18px;height:56px;box-shadow:0 8px 30px rgba(0,0,0,0.2)}

    /* PANEL */
    .hero-panel{padding:48px 28px;display:flex;align-items:flex-start}
    .panel-inner{background:#fff;border-radius:12px;padding:28px;box-shadow:0 12px 40px rgba(7,16,26,0.08)}
    .eyebrow{color:var(--accent);font-weight:700;font-size:13px}
    .hero-title{font-size:34px;margin:8px 0 6px}
    .hero-sub{color:#445;opacity:0.8;margin:0 0 18px}
    .price-row{display:flex;align-items:baseline;gap:14px}
    .price{font-size:22px;font-weight:800}
    .compare{text-decoration:line-through;color:#888}
    .micro{font-size:13px;color:#666;margin:12px 0}
    .panel-ctas{display:flex;gap:12px;margin-top:10px}
    .btn-primary{background:var(--accent);color:#042;padding:12px 18px;border-radius:10px;text-decoration:none;font-weight:800}
    .btn-secondary{background:transparent;border:1px solid #ddd;padding:10px 14px;border-radius:10px;text-decoration:none;color:#333}
    .trust{display:flex;gap:8px;margin-top:18px}
    .badge{background:#f6f8f6;padding:6px 10px;border-radius:999px;font-size:13px}

    .story-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:20px}
    .card{background:#fafafa;padding:12px;border-radius:10px}
    .card h4{margin:0 0 6px}

    /* RECIPES */
    .recipes-row{padding:40px 28px;background:linear-gradient(180deg,#fbfdfb,#fff);}
    .recipes-title{margin:0 0 18px;font-size:22px}
    .recipes-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .recipe-card{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 8px 30px rgba(2,6,23,0.03)}
    .recipe-card img{width:100%;height:160px;object-fit:cover}
    .rc-body{padding:12px}
    .rc-desc{font-size:14px;color:#444}
    .rc-cta{display:inline-block;margin-top:8px;color:var(--accent);font-weight:700;text-decoration:none}

    /* Responsive */
    @media (max-width: 980px){
      .renew-hero-inner{grid-template-columns:1fr;}
      .hero-video-sticky{position:relative;top:auto;height:48vh}
      .hero-poster{height:36vh}
      .hero-panel{padding:24px}
      .recipes-grid{grid-template-columns:1fr}
    }
  </style>

  <script>
    (function(){
      var section = document.currentScript && document.currentScript.parentNode;
      if(!section) return;

      var video = section.querySelector('.hero-video');
      if(video){
        // Ensure muted for autoplay
        video.muted = {{ section.settings.muted | default: true }};

        var io = new IntersectionObserver(function(entries){
          entries.forEach(function(e){
            if(e.isIntersecting){
              video.play().catch(function(){});
            } else {
              video.pause();
            }
          });
        }, {threshold:0.5});

        io.observe(section);
      }

    })();
  </script>

  {% schema %}
  {
    "name":"Renew — Product",
    "settings":[
      {"type":"text","id":"eyebrow","label":"Eyebrow text","default":"New"},
      {"type":"text","id":"company","label":"Company name","default":"Renew"},
      {"type":"text","id":"title","label":"Title","default":"Renew Moringa Powder"},
      {"type":"text","id":"subtitle","label":"Subtitle","default":"Stone-ground • Farm-fresh • Daily nutrition"},
      {"type":"text","id":"price_text","label":"Price text","default":"$12.99"},
      {"type":"text","id":"compare_text","label":"Compare at (optional)"},
      {"type":"text","id":"microcopy","label":"Microcopy under CTA","default":"100% natural • No additives • Vegan"},

      {"type":"url","id":"video_url","label":"Video URL (paste uploaded file URL)"},
      {"type":"image_picker","id":"poster","label":"Poster image / fallback"},
      {"type":"image_picker","id":"logo","label":"Logo"},
      {"type":"checkbox","id":"show_logo","label":"Show logo over video","default":true},

      {"type":"checkbox","id":"autoplay","label":"Autoplay video","default":true},
      {"type":"checkbox","id":"muted","label":"Muted (for mobile autoplay)","default":true},
      {"type":"checkbox","id":"loop","label":"Loop video","default":true},
      {"type":"number","id":"sticky_top","label":"Sticky top offset (px)","default":80},

      {"type":"text","id":"story_1","label":"Story card 1 text","default":"Pure moringa leaves, sun-dried and stone-ground."},
      {"type":"text","id":"story_2","label":"Story card 2 text","default":"Hand-picked, small-batch processing to retain nutrients."},
      {"type":"text","id":"story_3","label":"Story card 3 text","default":"Supporting local farms and responsible harvests."},

      {"type":"text","id":"cta_text","label":"CTA text","default":"Buy now"},
      {"type":"url","id":"cta_url","label":"CTA link","default":"/collections/all"},

      {"type":"image_picker","id":"recipe_image_1","label":"Recipe 1 image"},
      {"type":"text","id":"recipe_title_1","label":"Recipe 1 title","default":"Moringa Smoothie"},
      {"type":"textarea","id":"recipe_desc_1","label":"Recipe 1 description","default":"Add 1 tsp Renew to your morning smoothie with banana, berries & almond milk."},
      {"type":"text","id":"recipe_cta_1","label":"Recipe 1 CTA text","default":"View recipe"},
      {"type":"url","id":"recipe_url_1","label":"Recipe 1 link"},

      {"type":"image_picker","id":"recipe_image_2","label":"Recipe 2 image"},
      {"type":"text","id":"recipe_title_2","label":"Recipe 2 title","default":"Golden Latte"},
      {"type":"textarea","id":"recipe_desc_2","label":"Recipe 2 description","default":"Stir 1 tsp into warm milk with a dash of cinnamon for a calming tonic."},
      {"type":"text","id":"recipe_cta_2","label":"Recipe 2 CTA text","default":"View recipe"},
      {"type":"url","id":"recipe_url_2","label":"Recipe 2 link"},

      {"type":"image_picker","id":"recipe_image_3","label":"Recipe 3 image"},
      {"type":"text","id":"recipe_title_3","label":"Recipe 3 title","default":"Savory Dip"},
      {"type":"textarea","id":"recipe_desc_3","label":"Recipe 3 description","default":"Mix 1 tsp into hummus or yogurt for a green boost."},
      {"type":"text","id":"recipe_cta_3","label":"Recipe 3 CTA text","default":"View recipe"},
      {"type":"url","id":"recipe_url_3","label":"Recipe 3 link"}
    ],
    "presets":[{"name":"Renew — Full-Bleed Hero Product","category":"Hero"}]
  }
  {% endschema %}
</section>
